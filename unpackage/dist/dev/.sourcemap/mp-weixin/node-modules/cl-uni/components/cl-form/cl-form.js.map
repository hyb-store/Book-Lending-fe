{"version":3,"sources":["webpack:////Users/renwentao/Downloads/06图书查阅(1)/node_modules/cl-uni/components/cl-form/cl-form.vue?0447","webpack:////Users/renwentao/Downloads/06图书查阅(1)/node_modules/cl-uni/components/cl-form/cl-form.vue?95b7","webpack:////Users/renwentao/Downloads/06图书查阅(1)/node_modules/cl-uni/components/cl-form/cl-form.vue?7abf","webpack:////Users/renwentao/Downloads/06图书查阅(1)/node_modules/cl-uni/components/cl-form/cl-form.vue?2efd","uni-app:///node_modules/cl-uni/components/cl-form/cl-form.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;;;AAGtD;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAo1B,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACcx2B;AACA;AACA,wD;;;;;;;;;;;;;AAEA;;;;;;;;;;;;;mBAeA,EACA,eADA,EAGA,uBAHA,EAKA,SACA;AACA,aACA,YADA,EAEA,8BACA;AACA,OAJA,EAFA;;AAQA;AACA,iBATA;AAUA;AACA,mBAXA;AAYA;AACA,qBAbA;AAcA;AACA;AACA,mBADA;AAEA,mBAFA,EAfA;;AAmBA;AACA;AACA,kBADA;AAEA,uBAFA,EApBA;;AAwBA;AACA;AACA,kBADA;AAEA,sBAFA,EAzBA;;AA6BA;AACA;AACA,mBADA;AAEA,oBAFA,EA9BA,EALA;;;;AAyCA,4BAzCA;;AA2CA,MA3CA,kBA2CA;AACA;AACA,gBADA;AAEA,eAFA;AAGA,eAHA;AAIA,iBAJA;;AAMA,GAlDA;;AAoDA;AACA;AACA,gBADA;AAEA,aAFA,mBAEA,IAFA,EAEA,IAFA,EAEA;AACA;AACA;AACA;AACA,8CADA;;AAGA;;AAEA;AACA,OAXA,EADA;;;AAeA;AACA,qBADA;AAEA,aAFA,mBAEA,GAFA,EAEA;AACA;AACA,OAJA,EAfA;;;AAsBA;AACA,gBADA;AAEA,qBAFA;AAGA,aAHA,mBAGA,GAHA,EAGA;AACA;AACA;AACA;AACA;AACA,OARA,EAtBA,EApDA;;;;AAsFA;AACA,UADA,oBACA;AACA;AACA;AACA,KAJA,EAtFA;;;AA6FA,SA7FA,qBA6FA;AACA;AACA;AACA,GAhGA;;AAkGA;AACA;AACA,YAFA,oBAEA,KAFA,EAEA;AACA;AACA,KAJA;;AAMA;AACA,YAPA,oBAOA,QAPA,EAOA;AACA;AACA,KATA;;AAWA;AACA,iBAZA,yBAYA,KAZA,EAYA,QAZA,EAYA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,OAFA;;AAIA;AACA;AACA;AACA,sBADA;;;AAIA;AACA;AACA;AACA,OARA;AASA,KAhDA;;AAkDA;AACA,eAnDA,yBAmDA;AACA;AACA;AACA;AACA;AACA,KAxDA;;AA0DA;AACA,iBA3DA,2BA2DA;AACA;AACA,KA7DA;;AA+DA;AACA,eAhEA,uBAgEA,IAhEA,EAgEA;AACA;AACA,KAlEA;;AAoEA;AACA,WArEA,mBAqEA,MArEA,EAqEA,OArEA,EAqEA;AACA,mBADA,CACA,KADA,QACA,KADA,mBACA,KADA,CACA,KADA,2BACA,UADA,gCACA,KADA,CACA,KADA,2BACA,WADA;;AAGA;AACA,oBADA;AAEA,oBAFA;AAGA,oBAHA;AAIA,sBAJA;;AAMA,KA9EA;;AAgFA;AACA,cAjFA,sBAiFA,EAjFA,EAiFA,EAjFA,EAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAFA;AAGA;AACA;;AAEA;AACA,SAVA,MAUA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAhBA,MAgBA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OApCA;;AAsCA;AACA;AACA,OAFA;AAGA,KA3HA,EAlGA,E","file":"node-modules/cl-uni/components/cl-form/cl-form.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./cl-form.vue?vue&type=template&id=58944d34&\"\nvar renderjs\nimport script from \"./cl-form.vue?vue&type=script&lang=js&\"\nexport * from \"./cl-form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"node_modules/cl-uni/components/cl-form/cl-form.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cl-form.vue?vue&type=template&id=58944d34&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cl-form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cl-form.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view\r\n\t\t:class=\"[\r\n\t\t\t'cl-form',\r\n\t\t\t{\r\n\t\t\t\t'is-border': border,\r\n\t\t\t},\r\n\t\t]\"\r\n\t>\r\n\t\t<slot></slot>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport AsyncValidator from \"../../utils/async-validator\";\r\nimport Emitter from \"../../mixins/emitter\";\r\nimport { isArray, isObject, isString, isBoolean, isEmpty, isNumber, cloneDeep } from \"../../utils\";\r\n\r\n/**\r\n * form 表单\r\n * @description 表单，基于 async-validator 的验证\r\n * @tutorial https://docs.cool-js.com/uni/components/form/rules.html\r\n * @property {Object} model 表单数据对象\r\n * @property {Object} rules 表单验证规则\r\n * @property {Boolean} border 是否带有边框\r\n * @property {Boolean} disabled 是否禁用\r\n * @property {Boolean} showMessage 是否显示消息提示\r\n * @property {String} labelWidth 表单域标签的宽度，默认150rpx\r\n * @property {String} labelPosition 表单域标签的位置，默认right\r\n * @property {Boolean} validateOnRuleChange 是否在 rules 属性改变后立即触发一次验证，默认true\r\n * @example <cl-form model=\"\" rules=\"\"></cl-form>\r\n */\r\n\r\nexport default {\r\n\tname: \"cl-form\",\r\n\r\n\tcomponentName: \"ClForm\",\r\n\r\n\tprops: {\r\n\t\t// 表单数据对象\r\n\t\tmodel: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {};\r\n\t\t\t},\r\n\t\t},\r\n\t\t// 表单验证规则\r\n\t\trules: Object,\r\n\t\t// 是否带有边框\r\n\t\tborder: Boolean,\r\n\t\t// 是否禁用\r\n\t\tdisabled: Boolean,\r\n\t\t// 是否显示消息提示\r\n\t\tshowMessage: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\t// 表单域标签的宽度\r\n\t\tlabelWidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"150rpx\",\r\n\t\t},\r\n\t\t// 表单域标签的位置\r\n\t\tlabelPosition: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"right\",\r\n\t\t},\r\n\t\t// 是否在 rules 属性改变后立即触发一次验证\r\n\t\tvalidateOnRuleChange: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t},\r\n\r\n\tmixins: [Emitter],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trules2: {},\r\n\t\t\tprops: [],\r\n\t\t\t_form: {},\r\n\t\t\tlock: false,\r\n\t\t};\r\n\t},\r\n\r\n\twatch: {\r\n\t\tmodel2: {\r\n\t\t\tdeep: true,\r\n\t\t\thandler(newV, oldV) {\r\n\t\t\t\tif (!this.lock) {\r\n\t\t\t\t\t// 数据变化时，通知 form-item 验证\r\n\t\t\t\t\tthis.publish(\"validate\", {\r\n\t\t\t\t\t\tprops: this.checkProps(newV, oldV),\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.lock = false;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\trules: {\r\n\t\t\timmediate: true,\r\n\t\t\thandler(val) {\r\n\t\t\t\tthis.setRules(val);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\trules2: {\r\n\t\t\tdeep: true,\r\n\t\t\timmediate: true,\r\n\t\t\thandler(val) {\r\n\t\t\t\t// 设置字段\r\n\t\t\t\tthis.props = Object.keys(val);\r\n\t\t\t\t// 通知 form-item 修改验证规则\r\n\t\t\t\tthis.publish(\"change-rule\", { rules: val });\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tmodel2() {\r\n\t\t\t// 避免 newValue 与 oldValue 重复\r\n\t\t\treturn cloneDeep(this.model);\r\n\t\t},\r\n\t},\r\n\r\n\tmounted() {\r\n\t\t// 设置默认数据\r\n\t\tthis._form = cloneDeep(this.model);\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t// 弥补 props 方法不能传递的问题\r\n\t\tsetRules(rules) {\r\n\t\t\tthis.rules2 = rules || {};\r\n\t\t},\r\n\r\n\t\t// 校验表单\r\n\t\tvalidate(callback) {\r\n\t\t\tthis.validateField(this.props, callback);\r\n\t\t},\r\n\r\n\t\t// 根据字段校验表单\r\n\t\tvalidateField(props, callback) {\r\n\t\t\tif (!props) {\r\n\t\t\t\tconsole.warn(`Props 为空`);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (!isArray(props)) {\r\n\t\t\t\tprops = [props];\r\n\t\t\t}\r\n\r\n\t\t\tlet rules = {};\r\n\r\n\t\t\tfor (let i in this.rules2) {\r\n\t\t\t\tif (props.includes(i)) {\r\n\t\t\t\t\trules[i] = this.rules2[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst validator = new AsyncValidator(rules);\r\n\r\n\t\t\tlet form = {};\r\n\r\n\t\t\tprops.forEach((e) => {\r\n\t\t\t\tform[e] = this.model[e];\r\n\t\t\t});\r\n\r\n\t\t\t// 验证所有prop\r\n\t\t\tvalidator.validate(form, (errors, fields) => {\r\n\t\t\t\tthis.publish(\"validate\", {\r\n\t\t\t\t\tprops,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(!errors, errors);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 重置表单\r\n\t\tresetFields() {\r\n\t\t\tthis.lock = true;\r\n\t\t\tthis.form = cloneDeep(this._form);\r\n\t\t\tthis.$emit(\"update:model\", this.form);\r\n\t\t\tthis.clearValidate();\r\n\t\t},\r\n\r\n\t\t// 移除表单校验结果\r\n\t\tclearValidate() {\r\n\t\t\tthis.publish(\"clearValidate\");\r\n\t\t},\r\n\r\n\t\t// 移除字段\r\n\t\tremoveField(prop) {\r\n\t\t\tthis.props.splice(this.props.indexOf(prop), 1);\r\n\t\t},\r\n\r\n\t\t// 发布消息\r\n\t\tpublish(action, options) {\r\n\t\t\tlet { rules, props = this.props, model = this.model2 } = options || {};\r\n\r\n\t\t\tthis.broadcast(\"ClFormItem\", \"form.event\", {\r\n\t\t\t\trules,\r\n\t\t\t\tprops,\r\n\t\t\t\tmodel,\r\n\t\t\t\taction,\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 检测是哪个prop引起的变化\r\n\t\tcheckProps(d1, d2) {\r\n\t\t\tconst deep = (d1, d2) => {\r\n\t\t\t\tif (isArray(d2)) {\r\n\t\t\t\t\tif (isArray(d1)) {\r\n\t\t\t\t\t\tif (d2.length === d1.length) {\r\n\t\t\t\t\t\t\treturn !d2.some((v, i) => {\r\n\t\t\t\t\t\t\t\treturn !deep(d2[i], d1[i]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (isObject(d2)) {\r\n\t\t\t\t\tif (isObject(d1)) {\r\n\t\t\t\t\t\tlet flag = true;\r\n\r\n\t\t\t\t\t\tfor (let i in d2) {\r\n\t\t\t\t\t\t\tflag = deep(d2[i], d1[i]);\r\n\r\n\t\t\t\t\t\t\tif (!flag) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (isString(d2)) {\r\n\t\t\t\t\treturn d1 === d2;\r\n\t\t\t\t} else if (isNumber(d2)) {\r\n\t\t\t\t\treturn d1 === d2;\r\n\t\t\t\t} else if (isBoolean(d2)) {\r\n\t\t\t\t\treturn d1 === d2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treturn this.props.filter((k) => {\r\n\t\t\t\treturn !deep(d1[k], d2[k]);\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n"],"sourceRoot":""}